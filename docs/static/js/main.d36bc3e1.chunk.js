(this["webpackJsonppopulation-count"]=this["webpackJsonppopulation-count"]||[]).push([[0],{21:function(t,e,n){t.exports={markerslist:"styles_markerslist__2giCU",markerslist__icon:"styles_markerslist__icon__3HREX"}},38:function(t,e,n){t.exports={map:"styles_map__3o9Ln"}},48:function(t,e,n){},49:function(t,e,n){},78:function(t,e,n){"use strict";n.r(e);var r=n(5),a=n(1),i=n.n(a),c=n(34),o=n.n(c),u=(n(48),n(49),n(12)),s=n(19),l=n.n(s),f=n(22),p=n(35),d=n(23),j=n(80),m=n(81),g=n(82),b=n(42),O=(n(57),n(58),n(38)),h=n.n(O),_={maptiler:{url:"http://tile.digimap.ru/rumap/{z}/{x}/{y}.png?guid=93BC6341-B35E-4B34-9DFE-26796F64BBB7",attribution:""},center:{lat:57.152985,lng:65.541227},zoomLevel:9,API:"https://gis01.rumap.ru/4898/areaStatistics?guid=93BC6341-B35E-4B34-9DFE-26796F64BBB7"},v=n(39),x=n.n(v),y=n(79),B=n(2),k=n.n(B),E=n(21),C=n.n(E),F=function(t){var e=t.markers;if(0===e.length)return null;return Object(r.jsx)("div",{className:C.a.markerslist,children:e.map((function(t){var e=k.a.divIcon({className:x()(C.a.markerslist__icon),html:t.count||0});return Object(r.jsx)(y.a,{icon:e,position:t.position},t.id)}))})},w=n(40),L=n.n(w),I=function(t){var e=t.getCenter(),n=t.getBounds().getEast(),r=k.a.latLng(e.lat,n);return Math.round(e.distanceTo(r))},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(e,n){if(!t)return n(new Error("\u041f\u0443\u0441\u0442\u044b\u0435 \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"));var r=_.API,a=t.getCenter(),i={method:"get",url:r,params:{x:a.lat,y:a.lng,maxdist:I(t),geometry:0}};return L()(i).then((function(t){e(t.data.population_rs)})).catch((function(t){n(new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f"))})),!1}))},S=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],i=e[1],c=Object(a.useState)([]),o=Object(d.a)(c,2),s=o[0],O=o[1],v=Object(a.useRef)(),x=function(){var t=Object(p.a)(l.a.mark((function t(e){var n,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.layerType,r=e.layer,"polygon"!==n){t.next=8;break}return a=r._leaflet_id,i((function(t){return[].concat(Object(f.a)(t),[{id:a,latlngs:r.getLatLngs()[0]}])})),t.next=6,P(r);case 6:c=t.sent,O((function(t){return[].concat(Object(f.a)(t),[{id:a,position:r.getCenter(),count:c}])}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){}),[n]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(j.a,{center:_.center,zoom:_.zoomLevel,ref:v,className:h.a.map,children:[Object(r.jsx)(m.a,{children:Object(r.jsx)(b.a,{position:"topright",onCreated:x,onEdited:function(t){var e=t.layers._layers;console.log(t),Object.values(e).forEach((function(t){var e=t._leaflet_id,n=t.editing;i((function(t){return t.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{latlngs:Object(u.a)({},n.latlngs[0])}):t}))})),O((function(n){return n.map((function(n){return n.id===e?Object(u.a)(Object(u.a)({},n),{},{position:t.getCenter(),count:100}):n}))}))}))},onDeleted:function(t){var e=t.layers._layers;Object.values(e).forEach((function(t){var e=t._leaflet_id;i((function(t){return t.filter((function(t){return t.id!==e}))})),O((function(t){return t.filter((function(t){return t.id!==e}))}))}))},draw:{rectangle:!1,polyline:!1,circle:!1,circlemarker:!1,marker:!1}})}),Object(r.jsx)(g.a,{url:_.maptiler.url,attribution:_.maptiler.attribution}),Object(r.jsx)(F,{markers:s})]})})};var z=function(){return Object(r.jsx)(S,{})},D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),i(t),c(t)}))};n(77);o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(z,{})}),document.getElementById("root")),D()}},[[78,1,2]]]);
//# sourceMappingURL=main.d36bc3e1.chunk.js.map